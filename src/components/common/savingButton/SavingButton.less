@import '~resources/styles/_antd-theme.less';


.saving-button__ {
  @brand-success: @primary-color;
  @loader-size: 28px;
  @check-height: @loader-size / 2;
  @check-width: @check-height / 2;
  @check-left: (@loader-size / 10 + @loader-size / 14);
  @check-thickness: 3px;
  @check-color: @brand-success;

  &container {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;

    .anticon {
      transition: opacity 300ms ease-in-out;;
    }

    &.saving .anticon,&.saved .anticon {
      opacity: 0;
    }
  }

  &tick-container {
    position: absolute;
    position: absolute;
    left: -4px;
    top: -2px;

    .circle-loader {
      border: 2px solid rgba(0, 0, 0, 0.1);
      border-left-color: @check-color;
      animation: loader-spin 1.2s infinite linear;
      position: relative;
      display: none;
      vertical-align: top;
      border-radius: 50%;
      width: @loader-size;
      height: @loader-size;
    }

    .checkmark {
      display: none;

      &.draw:after {
        animation-duration: 800ms;
        animation-timing-function: ease;
        animation-name: checkmark;
        transform: scaleX(-1) rotate(135deg);
      }

      &:after {
        opacity: 1;
        height: @check-height;
        width: @check-width;
        transform-origin: left top;
        border-right: @check-thickness solid @check-color;
        border-top: @check-thickness solid @check-color;
        content: '';
        left: @check-left;
        top: @check-height;
        position: absolute;
      }
    }

    &.saved {
      .circle-loader {
        display: inline-block;
        -webkit-animation: none;
        animation: fade-out-eventually 2.5s 0s both;
        border-color: @check-color;
        transition: border 500ms ease-out;
      }
      .checkmark {
        display: block;
      }
    }

    &.saving {
      .circle-loader {
        display: inline-block;
      }
    }

  }

  @keyframes fade-out-eventually {
    0% {
      opacity: 1;
    }
    70% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes loader-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes checkmark {
    0% {
      height: 0;
      width: 0;
      opacity: 1;
    }
    20% {
      height: 0;
      width: @check-width;
      opacity: 1;
    }
    40% {
      height: @check-height;
      width: @check-width;
      opacity: 1;
    }
    100% {
      height: @check-height;
      width: @check-width;
      opacity: 1;
    }
  }
}
